jQuery(document).ready(function(e){var n=akrotehno.api_host,o=e("#dropin-container"),a=e("[data-remodal-id=processing-payment]"),t=e("[data-remodal-id=make-payment]"),d=e("[data-remodal-id=result-payment]"),i=d.find(".success"),r=d.find(".error");e.getJSON(n+"/client_token",function(t){function s(){braintree.setup(c,"dropin",{container:"dropin-container",onReady:function(){},paymentMethodNonceReceived:function(t,c){var l=d.remodal({}),p=a.remodal({closeOnOutsideClick:!1,closeOnEscape:!1,closeOnCancel:!1,closeOnConfirm:!1});p.open();var u=e("#donation-form");u.append("<input type='hidden' name='payment_method_nonce' value='"+c+"'></input>"),e("#dropin-container").empty(),s();var m=o.attr("for"),h=e("#"+m),f=h.find(":input"),v={};f.each(function(){if(this.name){var n,o=e(this),a=o.attr("type");switch(a){case"checkbox":n=o.is(":checked");break;default:n=o.val()}v[this.name]=n}});var y=h.find("g-recaptcha");y.length&&(v.response=gRecaptcha.getResponse(),v.secret=y.attr("data-sitekey"));h.attr("endpoint");i.addClass("hidden"),r.addClass("hidden"),jQuery.post(n+"/donate",v,function(e){return console.log(e),l.open(),e.success?void i.removeClass("hidden"):void r.removeClass("hidden")}).fail(function(){l.open(),r.removeClass("hidden")})}})}var c=t.token;return c?void s():void console.error("No client Token",t)}).fail(function(){t.find(".error").removeClass("hidden"),t.find("#dropin-form").addClass("hidden"),console.error("Could not reach api host",arguments)})});